{% extends 'base.html' %}
{% load static %}
{% block content %}

<!-- ======= Banner content ======= -->
<section id="other-banner-search" class="d-flex align-items-center justify-content-center m-0 pt-5 mt-5 my-5">
    <div class="container pt-2">
                    <div class="search mt-3 px-0 py-1 mx-0">
          <form id="form" action="{% url 'search' %}" method="GET">
            {% csrf_token %}
            <div class="row d-flex justify-content-center container p-0 m-0 px-1">
              <input id="keywords" type="text" name="keywords"
                class="form-control col-lg-3 col-md-12 col-sm-12 mx-2   py-4 my-2 border border-5"
                placeholder=" Keyword">
              <input id="locations" type="text" name="location"
                class="form-control col-lg-3 col-md-12 mx-2   py-4 col-sm-12 my-2 border border-5"
                placeholder=" Location">
              <input id="categories" type="text" name="category" value="{{ query }}" list="category"
                class="form-control col-lg-3 col-md-12 col-sm-12 mx-2  py-4 my-2 border border-5" placeholder=" Category (All)">
              <datalist id="category">
                {% for categories in categories %}
                <option>{{ categories.name }}</option>
                {% endfor %}
              </datalist>
              <button type="submit"
                class="btn search-bt col-lg-2 col-md-12 mx-2 col-sm-12 py-2 px-2 font-weight-bold my-2">Search</button>
            </div>
          </form>
        </div>
                </div>
</section> <!-- ======== Banner content end ======== -->

<!--       STRUCTURING THE POPULAR LISTINGS CONTENT-->
        <section id="popularListings" class="container mb-5 pt-5">
           <!--           MAIN POPULAR LISTINGS ROW CONTENT-->
  <div class="popularListingsRows row">
    {% if listings %}
              {% for listing in listings %}
              <div class="customCard p-2 m-0 col-lg-3 col-md-4 col-sm-6 mt-sm-3">
                  <div class="card">
                      <div class="card-header p-0">
                          <div class="blank rounded" style="background-image: url('{{ listing.photo_main.url }}'); background-repeat: no-repeat;
                          background-size:cover; width:100%; height: 15em; background-position:center-top" ;>
                          </div>
                      </div>
                      <div class="card-body">
                          <div class="content-details">
                              <h3 class="m-0 mt-1 mb-2 cardTitle">{{ listing.name }}</h3>
                              <p class="cardSubTitle">
                                {%autoescape off%}
                                  {{ listing.description|striptags|truncatechars:100 }}
                                {%endautoescape%}</p>
                              <a href="{% url 'listing' listing.id %}" class="btn btn-sm bg-dark text-light rounded-none cardBtn">Read More</a>
                          </div>
                      </div>

                  </div>
              </div>
              {% endfor %}
              {% else %}
              <div class="col-md-12">
                <p class="text-dark">No listings Available</p>
              </div>
              {% endif %}
  </div>
        </section>
{% endblock %}